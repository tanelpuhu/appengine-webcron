{% extends "base.html"%}

{% block title %}
Main :: {{block.super}}
{% endblock title %}

{% block body %}
  {% if rows %}
  <table border=0 cellpadding=6 cellspacing=0>
    <thead>
      <tr>
        <td>name</td>
        <td>method</td>
        <td>url</td>
        <td>minute(s)</td>
        <td>hour(s)</td>
        <td>weekday(s)</td>
        <td>last run</td>
        <td>modified at</td>
        <td>created</td>
        <td colspan=4>action</td>
      </tr>
    </thead>
  {% for row in rows %}
    <tr class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}{%if not row.active %} deactive{% endif%}">
      <td>{{row.name|escape}}</td>
      <td>
        {{row.method}}
        {% if row.response_email %}<br>(+email){% endif%}
        {% if row.response_post %}<br>(+post){% endif%}
      </td>
      <td>
        {{row.url|urlizetrunc:40}}
      </td>
      <td>
        {% for minute in row.minutes %}
          {{minute}}
        {% endfor%}
      </td>
      <td>
        {% for hour in row.hours %}
          {{hour}}
        {% endfor%}
      </td>
      <td>
        {% for weekday in row.weekdays %}
          {{weekday}}
        {% endfor%}
      </td>
      <td>
        {{row.lastrun|date:"d/M H:i:s"}}
      </td>
      <td>
        {{row.modified|date:"d/M H:i:s"}}
      </td>
      <td>
        {{row.created|date:"d/M H:i:s"}}
      </td>
      <td>
        <a href='/run/{{row.key.id}}'>Run</a>
      </td>
      <td>
        <a href='/edit/{{row.key.id}}'>Edit</a>
      </td>
      <td>
        <a href='/toggle/{{row.key.id}}'>
          {% if row.active %}
            OFF
          {% else %}
            ON
          {% endif %}
        </a>
      </td>
      <td>
        <a href='/delete/{{row.key.id}}'>Delete</a>
      </td>
    </tr>
  {% endfor %}
  </table>
  {% else %}
    0 cronjobs! Click <a href='/add'>here</a> to add one
  {% endif %}
{% endblock body %}
